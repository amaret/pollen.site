<!DOCTYPE html>
<html lang="en">

  <head>
    
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Pollen, a new programming language for tiny computers by Amaret, Inc.">
    <meta name="keywords" content="programming, programming languages, languages, hardware, microcontroller, embedded system, embedded systems, embedded systems programming, embedded development, microcontroller software, microcontroller software development">
    <meta name="author" content="Amaret, Inc.">

    <title>Programming Pollen</title>

    <!-- Bootstrap core CSS -->
    <link href="../../static/css/bootstrap.css" rel="stylesheet" />

    <!-- Prism CSS -->
    <link href="../../static/css/prism.css" rel="stylesheet" />

    <!-- Amaret core CSS -->
    <link href="../../static/css/pollen.css" rel="stylesheet" />

    <!-- Favicons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="static/ico/apple-touch-icon-144-precomposed.png">
    <link rel="icon" href="static/ico/favicon.ico">

    <!-- analytics --> 
    <script></script>
  </head>

  <body class="doc-page language-javascript" data-spy="scroll" data-target="#doc-sidenav">

    <div class="navbar navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://localhost/~amichi/pollen/index.html">Pollen</a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li id="introduction"><a href="http://localhost/~amichi/pollen/introduction/index.html">Introduction</a></li>
        <li><a href="http://localhost/~amichi/pollen/guide/index.html">Language Guide</a></li>
        <li><a href="http://localhost/~amichi/pollen/reference/index.html">Reference</a></li>
        <li><a href="http://localhost/~amichi/pollen/compiler/index.html">Compiler</a></li>
        <li><a href="">Support</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="">About</a></li>
      </ul>
    </div>
  </div>
</div>


    <div class="doc-header">
      <div class="container">
        <h1>Programming Pollen</h1>
        <p>A practical guide to the Pollen language features and how to make use of them effectively.</p>
      </div>
    </div>

    <div class="container doc-container" style="padding-bottom: 60px">
      <div class="row" id="content">
        <div class="col-md-3">
  <nav id="doc-sidenav" class="doc-sidebar hidden-print hidden-xs hidden-sm" role="navigation">
    <h4>Language Guide</h4>
<ul class="nav doc-sidenav affix-top" data-spy="affix" data-offset-top="10" data-offset-bottom="200" style="margin-top: 0px">
  <li><a href="http://localhost/~amichi/pollen/guide">The Basics</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/operators">Basic Operators</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/strings">Strings and Characters</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/arrays">Arrays</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/control-flow">Control Flow</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/function-references">Function References</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/host-initialization">Host Initialization</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/modules">Modules</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/protocols">Protocols</a></li>  
  <li><a href="http://localhost/~amichi/pollen/guide/compositions">Compositions</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/classes">Classes</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/enumerations">Enumerations</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/meta">Meta Types</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/print-keyword">Print Keyword</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/intrinsics">Intrinsics</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/c-code">C Code Injection</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/packages-bundles">Packages &amp; Bundles</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/pollen-corelib">Core Library</a>
    <ul>
        <li><a href="http://localhost/~amichi/pollen/guide/pollen-events">Events</a></li>
        <li><a href="http://localhost/~amichi/pollen/guide/pollen-timers">Timers</a></li>
    </ul>
  </li>
  
</ul>

  </nav>
</div>

<div class="col-md-9" role="main">

  <h1 id="print" class="page-header">The Print Keyword</h1>

<p class="lead">
The Pollen `print` statement can print strings, variables, and constants. 
</p>

<p>Here is a Pollen <code>print</code> statement: </p>

<pre><code>print "Hello World!" + "\n" 
</code></pre>

<p>Items to be printed can be concatenated with the <code>+</code> operator.  Below the values of the variables sysFreq and ticksPerUs will be printed.  Note that a <newline> must be explicitly added:</newline></p>

<pre><code>print "SysFreq = " + sysFreq + " Cpu.ticksPerUs is: " + ticksPerUs + "\n"
</code></pre>

<p>Here are the syntactic rules:</p>

<pre><code>printStmt -&gt; printItem ( '+' printItem )*
printItem -&gt; stringLiteral | variable | booleanLiteral | numericLiteral | charLiteral | fcnRtn
</code></pre>

<p>Note that the variables are simple variables of primitive type (or function
returns of those types). Structured types such as classes or modules are not supported in the print statement. </p>

<h2 class="page-header" id="ref-print-impl">
Pollen Print Implementations
</h2>

<p>This print statement is similar in syntax to print statements found in other languages. Print statements in host functions execute similarly to print in other languages, except they execute on the host, and then the output is downloaded to the client and displayed there.</p>

<p>What is unique to Pollen is that the print statement when it appears in target
functions has no implementation unless the Pollen print protocol is bound to a
print implementation. </p>

<p>The reason for this can be seen after considering the context for embedded programs. Most embedded applications do not have support for printing functionality. They may be running without an operating system and they almost certainly have no peripheral printer. What a print statement means in such a context is implementation dependent. It may be a no-op. In Pollen, if no print implementation is bound to the application, then all print statements in target functions are no-ops. </p>

<h4 class="page-header" id="ref-print-dbg">
Using Print to Support Local Host Debugging
</h4>

<p>One of the primary uses of print output in developing embedded applications does not involve code running on target hardware. Instead print output is used when the application is going through an initial round of debugging by being run on the host, a resource rich development system. This debugging phase is used to trace and verify execution flow, among other things. We will show how to use the binding of a print protocol in Pollen to support this debugging approach. </p>

<div class="alert alert-success" role="alert">
  <span class="glyphicon glyphicon-leaf"></span>
     In the Pollen context <em>local host</em> always refers to the resource
     rich host, not the target hardware.
</div>

<p>The <code>pollen-core</code> cloud bundle contains a <code>pollen.output</code> package. It contains the protocol for print:</p>

<pre><code> protocol PrintProtocol {
 
   printBool(bool b)
   printInt(int32 i)
   printUint(uint32 u) 
   printStr(string s) 
   printReal(real f) 
   
 }
</code></pre>

<p>This is a set of function declarations that handle incoming types. (Note that structure types (class or module types) are not handled in these functions.) A print statement seen in Pollen target code will be translated to a sequence of calls to these functions. </p>

<p>The implementation for the print statement must be a module that implements this protocol. The <code>localhost</code> cloud bundle  provides an implementation that can be used on the local host, during the debugging phase: </p>

<pre><code> package local.mcu
 
 from pollen.output import PrintProtocol
 
 module ConsolePrint implements PrintProtocol {
   
   +{ #include &lt;stdio.h&gt; }+
 
   public printBool(bool b) {
     if (b) {
       +{ printf("true") }+
     } else {
       +{ printf("false") }+
     }
   }
 
   public printInt(int32 i) {
     +{ printf("%i", i) }+
   }
 
   public printReal(real f) {
     +{ printf("%f", (float)f) }+
   }
 
   public printUint(uint32 u) {
     +{ printf("%iu", u) }+
   }
 
   public printStr(string s) {
     +{ printf("%s", s) }+  
   }
 }
</code></pre>

<h4 class="page-header" id="ref-print-bind">
Binding the Print Protocol with Command Line Options
</h4>

<p>In the local host context, the binding of the print protocol to this
implementation maps Pollen print to the C library stdio.h. After this binding,
the prints in the Pollen application will print their operands. </p>

<p>This binding can be accomplished via command line option. We can show this with
the example of <code>TimerBlink.p</code> (source code 
<a href="http://localhost/~amichi/pollen/guide/protocols#ref-protocol-timerblink">here</a>).
This code can be translated with an option that sets the target environment to
<code>localhost</code>.  The program
can then be run and its output will trace the code execution by means of print
statements. </p>

<p>Shown below is the command line with local host options. The local host bundle
is used with <code>-b</code> and the <code>-e</code> environment options specifies the <code>LocalHost.p</code>
composition. </p>

<pre><code>pollenc  -o out  -t localhost-gcc -b @pollen-core  -b @environments \
    -b @localhost                        \
    -e @environments/localhost/LocalHost \
    TimerBlink.p
</code></pre>

<p>Translating the program <code>TimerBlink.p</code> and then compiling and linking it with the local C
compiler we get this output:</p>

<pre><code>Pin.clear
Pin.makeOutput
Pin.set
Pin.clear
Pin.set
Pin.clear
...
</code></pre>

<p>When the environment for localhost is specified with <code>-e
@environments/localhost/LocalHost</code> on the command line, the translator used
composition <code>LocalHost</code> for the environment. That composition bound the print
protocol to the implementation <code>ConsolePrint</code> with this statement:</p>

<pre><code> pollen.printProtocol := ConsolePrint    // bind the print protocol 
</code></pre>

<p>If this binding were not present, the print statements would all be no-ops.</p>

<p>A print implementation can also be selected on the command line using the option <code>-p</code>. </p>

<pre><code>pollenc   -o out -t localhost-gcc -b @pollen-core  \
    -b @environments -e @environments/localhost/LocalHost \
    -p MyPrint \    
    MyTest.p   
</code></pre>

<p>Here <code>MyPrint.p</code> is a local implementation of print for test <code>MyTest.p</code>. </p>

  
  
</div>


      </div>
    </div>

        <footer class="" role="contentinfo">
      <div class="container section">

          <div class="container">
            <a data-scroll href="http://amaret.com"><img class="brand-logo" src="../../static/img/logo_white_medium.png" /></a>
            <h3 style="margin-top: 0">Integrated Solutions for Product Creation</h3>
            <p>
              Copyright &copy; 2015 Amaret Inc. All rights reserved. <!-- <a href="">Terms of Use</a> &nbsp;|&nbsp;  <a href="">Privacy Policy</a> -->
            </p>
          </div>

      </div>
    </footer>

    <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="../../static/js/pollen.js"></script>
    <script src="../../static/js/prism.js"></script>


  </body>

</html>
