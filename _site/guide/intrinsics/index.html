<!DOCTYPE html>
<html lang="en">

  <head>
    
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Pollen, a new programming language for tiny computers by Amaret, Inc.">
    <meta name="keywords" content="programming, programming languages, languages, hardware, microcontroller, embedded system, embedded systems, embedded systems programming, embedded development, microcontroller software, microcontroller software development">
    <meta name="author" content="Amaret, Inc.">

    <title>Programming Pollen</title>

    <!-- Bootstrap core CSS -->
    <link href="../../static/css/bootstrap.css" rel="stylesheet" />

    <!-- Prism CSS -->
    <link href="../../static/css/prism.css" rel="stylesheet" />

    <!-- Amaret core CSS -->
    <link href="../../static/css/pollen.css" rel="stylesheet" />

    <!-- Favicons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="static/ico/apple-touch-icon-144-precomposed.png">
    <link rel="icon" href="static/ico/favicon.ico">

    <!-- analytics --> 
    <script></script>
  </head>

  <body class="doc-page language-javascript" data-spy="scroll" data-target="#doc-sidenav">

    <div class="navbar navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://localhost/~amichi/pollen/index.html">Pollen</a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li id="introduction"><a href="http://localhost/~amichi/pollen/introduction/index.html">Introduction</a></li>
        <li><a href="http://localhost/~amichi/pollen/guide/index.html">Language Guide</a></li>
        <li><a href="http://localhost/~amichi/pollen/reference/index.html">Reference</a></li>
        <li><a href="http://localhost/~amichi/pollen/compiler/index.html">Compiler</a></li>
        <li><a href="">Support</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="">About</a></li>
      </ul>
    </div>
  </div>
  <div class="alert alert-warning" role="alert" style="text-align: center; margin: 0">
    <p><span class="glyphicon glyphicon-road" aria-hidden="true"></span> This documentation is being worked on and is not yet in a releasable state. &nbsp;2015-04-21</p>
  <p>  </p>
</div>

</div>



    <div class="doc-header draft-mode">
      <div class="container">
        <h1>Programming Pollen</h1>
        <p>A practical guide to the Pollen language features and how to make use of them effectively.</p>
      </div>
    </div>

    <div class="container doc-container" style="padding-bottom: 60px">
      <div class="row" id="content">
        <div class="col-md-3">
  <nav id="doc-sidenav" class="doc-sidebar hidden-print hidden-xs hidden-sm" role="navigation">
    <h4>Language Guide</h4>
<ul class="nav doc-sidenav affix-top" data-spy="affix" data-offset-top="10" data-offset-bottom="200" style="margin-top: 0px">
  <li><a href="http://localhost/~amichi/pollen/guide">The Basics</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/operators">Basic Operators</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/strings">Strings and Characters</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/arrays">Arrays</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/control-flow">Control Flow</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/function-references">Function References</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/host-initialization">Host Initialization</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/modules">Modules</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/protocols">Protocols</a></li>  
  <li><a href="http://localhost/~amichi/pollen/guide/compositions">Compositions</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/classes">Classes</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/enumerations">Enumerations</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/meta">Meta Types</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/print-keyword">Print Keyword</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/intrinsics">Intrinsics</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/c-code">C Code Injection</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/packages-bundles">Packages &amp; Bundles</a></li>
  <li><a href="http://localhost/~amichi/pollen/guide/pollen-corelib">Core Library</a>
    <ul>
        <li><a href="http://localhost/~amichi/pollen/guide/pollen-events">Events</a></li>
        <li><a href="http://localhost/~amichi/pollen/guide/pollen-timers">Timers</a></li>
    </ul>
  </li>
  
</ul>

  </nav>
</div>

<div class="col-md-9" role="main">

  <h1 id="arrays" class="page-header">Intrinsics</h1>

<p class="lead">Pollen has several different kinds of intrinsics: a set of <a href="#ref-intrin-lifecy">application lifecycle intrinsics</a>, as well as
intrinsics for <a href="#ref-intrin-slpwake">sleep wake</a>, <a href="#ref-intrin-assert">assert</a> and <a href="#ref-intrin-uname">the name of the currently executing unit</a>.</p>

<p>Pollen intrinsics provide common interfaces and protocols that applications can
rely on yet they are customizable for variable hardware and software
requirements.</p>

<h2 class="page-header" id="ref-intrin-lifecy">
Application Lifecycle Intrinsics 
</h2>

<p>Every device application has a lifecycle. At each stage of the lifecycle the
application may need to perform critical operations to ensure a proper
execution environment. For example, upon applying power to the device,
the microcontroller is reset at which time it must be configured
properly to ensure the rest of the application can execute. 
Most device applications are intended to run
perpetually with a power-off condition indicating failure. However,
some applications require the ability to be shutdown and they may need
specific operations performed during the shutdown process.</p>

<p>Pollen supports a set of intrinsic functions which serve as entry-points for
developers into a module’s lifecycle at runtime. Functionality
implemented in these intrinsics is commonly found in existing embedded
applications although where it resides and how it is integrated into an
application’s structure varies with the application. Having these entry
points standardized in Pollen with knowledge of their invocation at
specific points of runtime makes understanding application
functionality more straightforward.</p>

<p>The application lifecycle intrinsic functions defined by Pollen are
<code>pollen.reset()</code>, <code>pollen.run()</code>, <code>pollen.shutdown()</code>, and <code>pollen.ready()</code>.</p>

<h4 class="page-header" id="ref-intrin-init">
Startup: Initialization with Intrinsics and Constructors
</h4>

<p>The startup initialization intrinsics are <code>pollen.reset()</code>, <code>pollen.ready()</code>,
and <code>pollen.run()</code>.</p>

<p>This is the order of initialization:</p>

<ul>
  <li>Upon powering up the microcontroller, the first function called is <code>pollen.reset()</code>. </li>
  <li>Then each module constructor is called. (The order in which module constructors are executed is undefined.) </li>
  <li>After all constructors have completed, <code>pollen.ready()</code> is called. 
Thus an implementation of <code>pollen.ready()</code> can perform any cross module
initialization which requires that each individual module has already been initialized.</li>
  <li>Finally <code>pollen.run()</code> executes and the application starts. </li>
</ul>

<p>For both <code>pollen.reset()</code> and <code>pollen.ready()</code> 
system defined defaults exist. If the user defines one it will take precedence. </p>

<p>For <code>pollen.run()</code> there is no default and the user must define one in the top
level module. (Note <code>pollen.run()</code> is also where the pollen application startup
code is generated.)</p>

<h4 class="page-header" id="ref-intrin-shutdown">
Shutdown
</h4>

<p>Since the majority of embedded systems are intended to operate indefinitely,
the intrinsic <code>pollen.shutdown()</code> can be used to gracefully enter fail states should
they be encountered at runtime.</p>

<p>For <code>pollen.shutdown()</code>, a system defined default exists. If the user defines one it will take precedence. </p>

<p>Only one <code>pollen.shutdown()</code> can be defined.</p>

<h2 class="page-header" id="ref-intrin-other">
Other Intrinsics 
</h2>

<div class="alert alert-success" role="alert">
  <span class="glyphicon glyphicon-leaf"></span>
     Look for dynamic memory management intrinsics 
     in the next release.
</div>

<h4 class="page-header" id="ref-intrin-slpwake">
Sleep Wake
</h4>

<p>The two sleep wake constructors are <code>pollen.sleep()</code> and <code>pollen.wake()</code>.
They do not have default implementations. 
You can define a module that implements these functions and then bind it to the 
SleepWakeProtocol:</p>

<pre><code> pollen.sleepWakeProtocol := SleepWakeImpl
</code></pre>

<p>This binding can occur anywhere and then the functions 
<code>pollen.sleep()</code> and <code>pollen.wake()</code> are available everywhere.</p>

<h4 class="page-header" id="ref-intrin-uname">
Unitname 
</h4>

<p>It can be useful to have a variable that contains the name of the
currently executing unit. <code>pollen.unitname</code> is that variable. It is an
intrinsic string variable which holds that name. It can be used the way
any string variable could be used. It is only generated if accessed and
it does not need to be declared.</p>

<h4 class="page-header" id="ref-intrin-assert">
Assert
</h4>

<p>The assert intrinsic takes the form <code>pollen.assert(condition, message)</code>. The
<code>condition</code> is a conditional expression that is tested at runtime. If it is true
then the <code>message</code> is output. </p>

<p>For assertions to be in effect the <code>-a</code> option has
to be passed to the Pollen translator. In addition the print protocol must be
bound to a print implementation. If these conditions are not satisfied the
assert is a noop. </p>
  
  
</div>


      </div>
    </div>

        <footer class="" role="contentinfo">
      <div class="container section">

          <div class="container">
            <a data-scroll href="http://amaret.com"><img class="brand-logo" src="../../static/img/logo_white_medium.png" /></a>
            <h3 style="margin-top: 0">Integrated Solutions for Product Creation</h3>
            <p>
              Copyright &copy; 2015 Amaret Inc. All rights reserved. <!-- <a href="">Terms of Use</a> &nbsp;|&nbsp;  <a href="">Privacy Policy</a> -->
            </p>
          </div>

      </div>
    </footer>

    <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="../../static/js/pollen.js"></script>
    <script src="../../static/js/prism.js"></script>


  </body>

</html>
